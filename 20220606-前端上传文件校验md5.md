# 20220606-前端上传文件校验md5

> [element ui 文件上传 + MD5 + axios_Holly1945的博客-CSDN博客](https://blog.csdn.net/Holly1945/article/details/121080257?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-121080257-blog-106280009.pc_relevant_paycolumn_v3&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~Rate-1-121080257-blog-106280009.pc_relevant_paycolumn_v3&utm_relevant_index=1)
>
> [基于vue框架下使用Element-UI获取文件MD5值并上传_哔咔哔咔~的博客-CSDN博客_vue 获取文件md5](https://blog.csdn.net/weixin_45493798/article/details/106280009?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-1-106280009-null-null.pc_agg_new_rank&utm_term=elementui+获取上传文件md5&spm=1000.2123.3001.4430)
>
> [vue-simple-uploader + spark-md5 大文件分片断点续传（本篇只做分片上传）_seatownzhang的博客-CSDN博客_sparkmd5 分片](https://blog.csdn.net/qq_33462132/article/details/108474351)
>
> [基于vue-simple-uploader封装文件分片上传、秒传及断点续传的全局上传插件 - 夏大师 - 博客园 (cnblogs.com)](https://www.cnblogs.com/xiahj/p/vue-simple-uploader.html)
>
> [Vue2.0结合webuploader实现文件分片上传 - 夏大师 - 博客园 (cnblogs.com)](https://www.cnblogs.com/xiahj/p/8529545.html)

## 文件处理

```js

/**
 * base64转File
 * @param { string } dataurl
 * @param { string } filename
 */
export const dataURLtoFile = (dataurl, filename) => { // 将base64转换为文件
  var arr = dataurl.split(',')
  var mime = arr[0].match(/:(.*?);/)[1]
  var bstr = atob(arr[1])
  var n = bstr.length
  var u8arr = new Uint8Array(n)
  while (n--) {
    u8arr[n] = bstr.charCodeAt(n)
  }
  return new File([u8arr], filename, {
    type: mime
  })
}

/**
 * 压缩图片
 * @param { File } file
 */
import lrz from 'lrz'
export const compressImage = async (file) => {
  const lrz_file = await lrz(file)
  // 压缩后将base64转file
  return dataURLtoFile(lrz_file.base64, lrz_file.origin.name)
}
```

