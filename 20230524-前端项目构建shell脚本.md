# 20230524-前端项目构建shell脚本



```sh
// deploy.sh

#! /bin/sh  #Shell 脚本的开头 告诉操作系统要使用哪个解释器来执行这个脚本
name=projectName #用变量定义项目名称
path=$(cd `dirname $0`; pwd)  #获取当前脚本文件所在的目录的绝对路径
cd $path/$name #进入脚本路径下的项目目录
git stash  #将当前工作目录的修改保存到一个临时区域
git pull  #拉取项目git
git stash clear  #清空 Git stash 中保存的所有备份
npm install --verbose #安装依赖包时输出更详细的信息
npm run build:test #开始构建
rm -rf $path/build  #删除旧的目录内容
cp -r $path/$name/dist $path/build  #把构建好的文件复制到web服务器设置的项目目录

```

## \#! /bin/sh 是什么意思

`#! /bin/sh` 是一个 Shell 脚本的开头，也称为 Shebang 或 Hashbang。它告诉操作系统要使用哪个解释器来执行这个脚本。

具体来说，`#!` 是一个特殊的字符序列，后面紧跟着解释器的路径。在这个例子中，`/bin/sh` 是一个标准的 Unix Shell 解释器，用于执行 Shell 脚本。

当操作系统执行这个脚本时，会读取脚本的第一行，发现 `#! /bin/sh` 这个特殊的字符序列，就会使用 `/bin/sh` 解释器来执行这个脚本。这样可以确保脚本在不同的系统上都能够正确地执行。

需要注意的是，`#!` 后面的解释器路径必须是一个可执行文件的路径，否则会导致脚本执行失败。

## path=$(cd `dirname $0`; pwd) 命令解析

这行代码是一个 Shell 脚本命令，用于获取当前脚本文件所在的目录的绝对路径。

具体来说，这个命令包含了以下几个部分：

- `cd `dirname $0``：获取当前脚本文件所在的目录的相对路径，`$0` 表示当前脚本文件的名称，`dirname` 命令用于获取指定文件的目录路径。
- `pwd`：获取当前目录的绝对路径。

因此，这个命令的作用是将当前目录切换到脚本文件所在的目录，然后获取该目录的绝对路径，并将其保存到变量 `path` 中。

需要注意的是，这个命令在不同的操作系统和 Shell 环境中可能会有所不同，因此在使用时需要根据具体的环境进行调整。

## npm install --verbose 

`npm install --verbose` 是 npm 的命令之一，用于在安装依赖包时输出更详细的信息。

具体来说，`--verbose` 参数会让 npm 在安装依赖包时输出更多的信息，包括每个依赖包的安装进度、安装过程中的日志信息等。这个参数可以帮助您更好地了解依赖包的安装过程，以及发现安装过程中可能出现的问题。

需要注意的是，`--verbose` 参数会输出大量的信息，可能会影响命令行的可读性。如果您只需要查看安装进度和基本的日志信息，可以使用 `npm install --progress` 命令。这个命令会输出每个依赖包的安装进度，但不会输出详细的日志信息。