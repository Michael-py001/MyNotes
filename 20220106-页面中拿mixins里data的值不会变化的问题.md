# 20220106-页面中拿mixins里data的值不会变化的问题

## 遇到的问题：

​	在一个首页中，混入一个另外文件，在首页中拿mixins中的变量判断按钮是否显示，但是发现在混入文件中的变量变成true了，但是首页输出还是false原来的值。不会跟着变化。

## 问题答案：

​	最后发现，混入文件中的函数是被调用了，值也发生变化了，但是这个函数不是在首页里调用的，是通过了事件监听的方式从App.vue中调用了

```js
//home.vue
onShow() {
    this.userCenter() //正确方法
    
	// uni.$emit('userCenter') //错误方式
},
```

```js
//App.vue
mounted() {
    uni.$on('userCenter',()=>{
        this.userCenter()
    })
},
```

## 总结

混入的文件一定要在当前页面调用里面的方法，在哪个页面调用，data的值就只会在那个页面更新。



## 下面来说说mixins的特点：

> [vue中mixins的使用方法和注意点](https://www.bianchengquan.com/article/563971.html)



 1、方法和参数在各组件中不共享

​    比如混入对象中有一个 cont:1 的变量,在组件A中改变cont值为5，这时候在组件B中获取这个值，拿到的还是1，还是混入对象里的初始值，数据不共享



2、值为对象的选项，如methods,components等，选项会被合并，键冲突的组件会覆盖混入对象的，比如混入对象里有个方法A，组件里也有方法A，这时候在组件里调用的话，执行的是组件里的A方法



3、值为函数的选项，如created,mounted等，就会被合并调用，混合对象里的钩子函数在组件里的钩子函数之前调用，同一个钩子函数里，会先执行混入对象的东西，再执行本组件的



## 与vuex的区别

vuex：用来做状态管理的，里面定义的变量在每个组件中均可以使用和修改，在任一组件中修改此变量的值之后，其他组件中此变量的值也会随之修改。

Mixins：可以定义共用的变量，在每个组件中使用，引入组件中之后，各个变量是相互独立的，值的修改在组件中不会相互影响。



## 与公共组件的区别

组件：在父组件中引入组件，相当于在父组件中给出一片独立的空间供子组件使用，然后根据props来传值，但本质上两者是相对独立的。

Mixins：则是在引入组件之后与组件中的对象和方法进行合并，相当于扩展了父组件的对象与方法，可以理解为形成了一个新的组件。