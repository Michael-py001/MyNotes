# 20230508-Vim入门

> 参考资料：[VSCode VIM 的基本操作 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/430310347)

## 三种模式

- **NORMAL MODE 命令模式**

  > 打开vim后默认进入命令模式；或按下Esc键退出插入模式或可视模式

  效果：按下w，把光标移动到下一个单词的开头
  ![10](https://s2.loli.net/2023/05/08/mMbQStklcoHAPBU.gif)

- **INSERT MODE 插入模式** 

  > 在命令模式下按下i、a、o、I、A、O等键进入插入模式；
  >
  > 或在命令模式下按下s、S、c、C、r、R等键进入插入模式的特殊模式。

  效果：按下w，输入w

- **VISUAL MODE 可视模式**

  > 在命令模式下按下v、V、Ctrl+v键进入可视模式。

  效果：按下w，选中光标的单词直到下一个单词的开头，继续按w则继续选中下一个单词
  ![9](https://s2.loli.net/2023/05/08/eLHmJOSzNlbU53k.gif)

## 可视模式

可视模式是vim中的一种模式，可以用于选取文本。它可以选择字符、行、块等不同的范围，方便进行文本的复制、剪切、粘贴等操作。

在可视模式下，可以使用h、j、k、l等方向键或鼠标进行文本选取，也可以使用其他命令进行快速选取，如：

- v：进入字符可视模式，可以选取任意数量的字符。 

- V：进入行可视模式，可以选取整行文本。 
-  Ctrl+v：进入块可视模式，可以选取矩形块。 
-  o：在可视模式下，切换选取的端点。



## 插入模式的特殊模式

插入模式的特殊模式是指在插入模式下按下s、S、c、C、r、R等键所进入的模式。这些特殊模式的作用如下： 

- s：删除当前光标所在位置的字符并进入插入模式。 
- S：删除当前行并进入插入模式。
- c：删除从当前位置到指定位置的字符并进入插入模式。
- C：删除从当前位置到行尾的字符并进入插入模式。
- r：替换当前光标所在位置的字符并回到命令模式。 
- R：进入替换模式，替换当前光标所在位置的字符直到按下Esc键回到命令模式。

 这些特殊模式可以方便地进行插入或替换操作，提高编辑效率。

# vim的基本命令

好的，下面是 Vim 的基本命令和使用方法：

## 1.  光标移动命令

### 上下左右移动

- `h` : 向左移动
- `j` : 向下移动
- `k` : 向上移动
- `l` : 向下移动

### 单词间移动

- `w` : 跳到下一个单词的开头
- `b` : 跳到本单词或者上一个单词的开头（当光标在本单词的开头，则前往上一个单词的开头）
- `e` : 跳到本单词或者下一个单词的结尾
- `ge` : 跳到上一个单词的结尾

### 行首行尾移动

- `0` : 跳到行首
- `^` : 跳到从行首开始的第一个非空字符
- `$` : 跳到行尾
- `gg` : 跳到第一行
- `G` : 跳到最后一行
- `nG` : 跳到第 n 行
- `:n` : 跳到第 n 行

### 通过当前行字符跳转光标

- `f{char}` : 光标跳到下个 {char} 所在位置
- `F{char}` : 反向移动到上一个 {char} 所在位置
- `t{char}` : 光标跳到下一个 {char} 的前一个字符的位置
- `T{char}` : 光标跳到下一个 {char} 的后一个字符的位置
- `;` : 重复上次的字符查找命令
- `,` : 反向查找上次的查找命令

### 其他

```text
Ctrl + d : 向下滚动半屏
Ctrl + u : 向上滚动半屏

zt 将当前行置于屏幕顶部附近
zz 将当前行置于屏幕中央
zb 将当前行置于屏幕底部

H 跳转到屏幕的顶部
M 跳转到屏幕的中间
L 跳转到屏幕的底部

( 跳转到上一个句子
) 跳转到下一个句子
{ 跳转到上一个段落
} 跳转到下一个段落
```

## 2.  插入命令

- `i`：在光标前插入文本

- `I`：在行首插入文本

- `a`：在光标后插入文本

- `A`：在行尾插入文本

- `o`：在当前行下面插入新行

- `O`：在当前行上面插入新行

## 3. 删除命令

- `x`：删除光标所在的字符

- `dd`：删除整行

- `d$` 删除光标到行尾的内容

- `D`：删除到行尾

- `cc` 删除当前行并进入插入模式 

- `:x`，Enter：保存并退出

- `:q!`，Enter：不保存并退出

- `db` 删除从当前光标所在位置到**上一个单词**开头的内容，包括单词之间的空格

- `de` 删除光标后面的单词，与 `dw` 命令类似，但不会删除单词后面的空格

- `dw` 会删除从当前光标所在位置到下一个单词开头的内容，包括单词之间的空格

  

> - `d` 命令：删除命令，用于删除光标所在位置到指定位置之间的文本。
> - `b` 命令：单词边界命令，用于将光标移动到当前单词的开头。
> - `e`命令：用于将光标移动到当前单词的末尾。如果光标已经在单词的末尾，该命令将把光标移动到下一个单词的开头。

## 4. 复制和粘贴命令

- `yy`：复制整行
- `y$` 复制当前光标到行尾的内容，复制完成后，可以使用 `p` 命令将复制的内容粘贴到指定位置。

- p：粘贴

- P：在当前行前面粘贴

## 5. 查找和替换命令

- `/pattern`：从当前位置向下查找 pattern

- `?pattern`：从当前位置向上查找 pattern

- `n`：重复上一次查找

- `N`：反向重复上一次查找

- `:s/old/new/g`：将当前行的 old 替换为 new

- `:%s/old/new/g`：将整个文件中的 old 替换为 new

## 6. 选中单词/行

- 选中当前光标到**本单词/下一个单词**的内容：`b+v+e`
  按下 `b` 命令将光标移动到当前单词的开头，然后按下 `v` 命令进入 Visual 模式选择单词，最后按下 `e` 命令将光标移动到单词的末尾
- 选中光标到上一个单词的内容：`b+v+b` 

## 回退命令

- `u` 撤销上一个操作，比如删除操作



# Vim 的常用快捷键

## 1. 命令模式下的快捷键

- :w：保存文件
- :q：退出 Vim
- :wq：保存并退出 Vim
- :q!：强制退出 Vim，不保存修改
- :set nu：显示行号
- :set nonu：不显示行号
- :set hlsearch：打开搜索高亮
- :set nohlsearch：关闭搜索高亮

## 2. 插入模式下的快捷键

Ctrl + h：删除前一个字符 

Ctrl + w：删除前一个单词 

Ctrl + u：删除当前行

## 3. 可视模式下的快捷键

\- v：进入可视模式 

\- V：进入可视行模式

 - Ctrl + v：进入可视块模式

## 4. 命令模式和插入模式下的快捷键

\- Esc：从插入模式返回到命令模式 

\- Ctrl + c：从插入模式返回到命令模式 

\- Ctrl + [：从插入模式返回到命令模式

## 5. 其他快捷键

- gg：跳转到文件开头
- G：跳转到文件结尾
- 0：跳转到行首
- $：跳转到行尾
- Ctrl + f：向下翻页
- Ctrl + b：向上翻页
- /pattern：搜索 pattern
- n：重复上一次搜索
- N：反向重复上一次搜索

## 值得记住的组合拳

- `xp` : 调换相邻的两个字符
- `ddp` : 调换相邻的两行 这种组合拳最好是形成肌肉记忆，而不是去试图理解它的意思。

## 操作符跟动作的结合

结合跳转的一些例子：

- `y$` : 复制当前位置到行尾的所有内容
- `dw` : 删除当前位置到下一个单词的开头
- `c}` : 修改当前位置到这个段落的结尾
- `d(` : 删除到句子的开头

结合数字的一些例子：

- `y2h` : 向左拷贝两个字符
- `d2w` : 删除后两个单词
- `c2j` : 修改后面两行

结合 i 和 a 的一些例子：

- `di(` : 删除括号内的内容
- `di{` : 删除大括号内的内容
- `diw` : 删除光标所在的单词
- `da(` : 删除括号和括号内的内容
- `da{` : 删除大括号和大括号内的内容
- `daw` : 删除光标所有的单词以及周围的空白
- `df<char>` : 删除到下一个 char 字符

## 操作符（operator）

普通模式下：

- `d` : 删除（delete）
- `c` : 修改（删除并进入插入模式）（change）
- `y` : 复制（yank）
- `v` : 选中并进入 VISUAL 模式

### 操作符的简单用法

`dd` : 删除一整行。

 `cc` ：删除当前行并进入插入模式

`yy`：复制整行。

 `Ndd` : 其中 N 表示的是数字，例如 `2dd` 表示删除两行（向下执行），同样还有 `Ncc`、`Nyy`。

小 tip： `d` 和 `c` 附带剪切效果，也就是可以用 `p` 复制删除的内容。