# 20220602-Electron自定义标题栏&实现窗口最小化最大化关闭控制

> [javascript - Electron Remote (Close, Minimize etc) not work (Cannot read property 'getCurrentWindow' of undefined) - Stack Overflow](https://stackoverflow.com/questions/63655239/electron-remote-close-minimize-etc-not-work-cannot-read-property-getcurrent)

> [【Electron Playground】Electron 窗口问题汇总_晓前端的博客-CSDN博客](https://blog.csdn.net/xiaoheibanfe/article/details/111246891)
>
> [electron关闭窗口_羊心眼的博客-CSDN博客_electron 窗口关闭](https://blog.csdn.net/weixin_40679578/article/details/124859599)

## 实现窗口最小化最大化关闭控制

控制窗口的最小化/最大化/关闭这些操作，其实都在操作主进程中创建的`BrowserWindow`，那么就有两种方法对他进行操作。

### 一、渲染进程与主进程通讯，操作BrowserWindow

渲染进程：

```html
<div class="control" @click="control('min')"> </div>
```

```Js
import {ipcRenderer} from "electron";


control(type) {//传入不同的type进行操作
    ipcRenderer.send('window-control',{type:type})
}
```

主进程:

```js
ipcMain.on('window-control', (event, arg) => {
    let {type} = arg
    if(type=='min') {
        this.browserWindow.minimize()
    }
    else if(type=='max') {
        this.browserWindow.maximize()
    }
    else if(type=='unmax') {
        this.browserWindow.unmaximize()
    }
    else if(type=='close') {
        console.log("close");
        // this.browserWindow.destroy()
        this.browserWindow.close()
    }
})
```

### 二、使用remote，获得当前BrowserWindow

```js
import {ipcRenderer,remote} from "electron";
const BrowserWindow = remote.getCurrentWindow()
```

```js
control(type) {
    console.log("发送type", type)
    if(type=='min') {
        BrowserWindow.minimize()
    }
    else if(type=='max') {
        BrowserWindow.maximize()
    }
    else if(type=='unmax') { 
        BrowserWindow.unmaximize()
    }
    else if(type=='close') {
        BrowserWindow.close()
    }
}
```

### 四个操作api

- `BrowserWindow.minimize()` 最小化
- `BrowserWindow.maximize()` 最大化
- `BrowserWindow.unmaximize()` 取消最大化
- `BrowserWindow.close()` 关闭窗口

### 注意事项

- 如果当前打开了控制台，调`BrowserWindow.close()`是无法关闭窗口的
- 如果遇到bug关闭不了，可以尝试`BrowserWindow.destroy()`强制关闭窗口，但是app上的监听关闭事件无法捕捉到。

## 自定义标题栏

