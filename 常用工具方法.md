## URL地址解析

```js
let urlObj = this.urlParser(window.location.href)
this.openId = urlObj.search["open_id"] || ''

urlParser(url) {
        console.log("url:",url)
			  var a = document.createElement('a');
			  a.href = url; //?open_id=djfljsdl
			  var search = function(search) {
          console.log("search111",search)
			    if(!search) return {};
			    var ret = {};
			    search = search.slice(1).split('&');//?open_id=djfljsdl 去掉前面的问号
          console.log("search:",search)
			    for(var i = 0, arr; i < search.length; i++) {
			      arr = search[i].split('=');
            console.log("arr：",arr)
			      var key = arr[0], value = arr[1];
			      if(/\[\]$/.test(key)) {
			        ret[key] = ret[key] || [];
			        ret[key].push(value);
			      } else {
			        ret[key] = value;
			      }
			    }
			    return ret;
			  };
			  let obj = {
			    protocol: a.protocol,
			    host: a.host,
			    hostname: a.hostname,
			    pathname: a.pathname,
			    search: search(a.search),
			    hash: a.hash
			  }
        console.log("obj:",obj)
			  return {
			    protocol: a.protocol,
			    host: a.host,
			    hostname: a.hostname,
			    pathname: a.pathname,
			    search: search(a.search),
			    hash: a.hash
			  }
			},
```

## a标签下载

> 经过测试，在chrome点击图片会在新标签打开，不能下载，需要后端设置

```js
let a = document.createElement('a');
a.download = 'test.png';
a.href = this.qr_code;
a.target = '_blank';
document.body.appendChild(a);
a.click();
document.body.removeChild(a)
```

