# 20240702-【Git】如何撤销指定的提交并且不留下commit记录

要撤销指定的提交并且不留下新的提交记录，可以使用`git reset`命令。

1. **查看提交记录**：首先，查看提交历史，找到你想要撤销的提交记录的哈希值（SHA）。你可以使用以下命令查看提交历史：

    ```sh
    git log
    ```

2. **重置到指定提交的前一个提交**：使用`git reset`命令重置到指定提交的前一个提交。假设你要撤销提交`abc123`，你可以使用以下命令：

    ```sh
    git reset --hard abc123^
    ```

    这里的`abc123^`表示`abc123`的前一个提交。

    如果您想撤销最近的提交，但希望保留更改在工作目录中，可以使用以下命令：

    ```sh
    git reset --soft HEAD~1
    ```

    **--soft** 选项会将更改保留在暂存区。

    如果您想撤销最近的提交，并且不想保留更改，可以使用以下命令：

    ```sh
    git reset --hard HEAD~1
    ```

    **--hard** 选项会将更改从工作目录中删除。

    > - 使用 --hard 选项会丢失所有未保存的更改，请确保您不再需要这些更改。
    >
    > - 如果您已经推送了提交，您需要使用 git revert 或其他方法来处理远程仓库中的提交。

3. **强制推送到远程仓库**（如果你已经推送了这些提交到远程仓库）：如果你已经将这些提交推送到远程仓库，你需要使用`--force`选项强制推送更改：

    ```sh
    git push origin <branch-name> --force
    ```

    请注意，强制推送会覆盖远程仓库中的历史记录，可能会影响其他开发人员的工作，所以请谨慎使用。

总结：

```sh
# 查看提交历史，找到目标提交的哈希值
git log

# 重置到指定提交的前一个提交
git reset --hard abc123^

# 如果需要，强制推送到远程仓库
git push origin <branch-name> --force
```

这样，你就可以撤销指定的提交，并且不会留下新的commit记录。