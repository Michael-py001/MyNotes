# 20230327-Vue3+TSX语法使用

## v-model 使用

## setup()里写jsx

## 引入文件提示：找不到模块“@/xxxx” 或其相应的类型声明

![image.png](https://s2.loli.net/2023/03/29/XCWgoNVilxvTItb.png)这种报错提示一般是没有配置好tsconfig.json，主要写上`include`配置，值为模块的所在目录。

tsconfig.json和tsconfig.node.json配置：

```json
//tsconfig.json
{
  "compilerOptions": {
    "target": "ESNext",
    "useDefineForClassFields": true,
    "module": "ESNext",
    "moduleResolution": "Node",
    "allowJs": true,
    "strict": true,
    "jsx": "preserve",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "esModuleInterop": true,
    "lib": ["ESNext", "DOM"],
    "skipLibCheck": true,
    "noEmit": true,
    "baseUrl": "./",
    "paths": {
      "@/*": ["./src/*"],
      "@packages/*":["./packages/*"]
    }
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue", "packages/**/*.ts", "packages/**/*.d.ts", "packages/**/*.tsx", "packages/**/*.vue"],
  "references": [{ "path": "./tsconfig.node.json" }]
}

```

```json
//tsconfig.node.json
{
  "compilerOptions": {
    "jsx": "preserve",
    "composite": true,
    "allowJs": true,
    "module": "ESNext",
    "moduleResolution": "Node",
    "allowSyntheticDefaultImports": true,
    "baseUrl": "./",
    "paths": {
      "@/*": ["./src/*"],
      "@packages/*":["./packages/*"]
    },
    "outDir":"./dist",
  },
  "include": [
    "./src/**/*"
  ],
  "exclude": [
    "node_modules",
    ".history",
    "dist"
  ]
}
```



### 文件跳转配置

一般项目在`jsconfig.json`中配置了`baseUrl、path、include`都可以正常用`ctrl + 鼠标左键`跳转到文件目录

如果你的`tsconfig.json`有`"references": [{ "path": "./tsconfig.node.json" }]`这个配置，那么两个文件都加上: `"allowJs": true,`

### 报错处理

如果遇到以下报错：

> JSON schema for the TypeScript compiler’s configuration file
>
> 无法写入文件“d:/xxx/src/vuex/xxx.js”，因为它会覆盖输入文件。ts

在tsconfig.node.json中加上：

```json
"compilerOptions": {
    "outDir":"./dist",
},
"exclude": [
    "node_modules",
    "dist"
  ]
```

实际运用中加上这个配置就可以解除报错，最大的可能是`outDir`这个配置导致的报错。

## .less文件模块声明

“TS不认识.ts以外的文件” 这个说法是错误的。这里的 TS 准确说是 tsc 也就是 TS 的编译器，它能认识 .ts 和 .d.ts 文件，它会自动读取整个工程下 .d.ts 文件来作为类型声明。

使用vite 的话，它自动认识 .scss，不需要特别处理，但是使用less时，需要自己定义类型：

```ts
// env.d.ts
declare module "*.module.less" {
  const classes: { readonly [key: string]: string };
  export default classes;
}
```

