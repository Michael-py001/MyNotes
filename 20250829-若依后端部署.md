# 前置条件

## 把Docker目录放到服务器根目录

若依项目的docker文件在`script/docker`下，把整个文件上传到服务器根目录

## Docker 命令 

如果是在WSL2下执行，以下命令都要注释host属性 

```
# network_mode: "host" # WSL2下关闭
```

部署MySql

```
sudo docker-compose up -d mysql
```

部署 nacos

```
sudo docker-compose up -d nacos
```

## 添加用户到docker group

## 配置nacos数据库url

## 启动redis minio

```bash
sudo docker-compose up -d redis minio
```

## 设置redis权限

```
docker run --rm -v /docker/redis/data:/data redis:7.2.8 sh -c "mkdir -p /data && chown -R redis:redis /data"
```

## Docker 启动服务顺序

### 创建基础服务

```shel
docker-compose up -d mysql nginx-web redis minio nacos
```

### 创建中心服务(需要先构建服务镜像)

这里只有nacos能启动

```shel
docker-compose up -d  seata-server sentinel ruoyi-monitor ruoyi-snailjob-server
```

### 创建业务服务(需要先构建服务镜像)

这里docker启动不来，需要本地构建

```shel
docker-compose up -d ruoyi-gateway ruoyi-auth ruoyi-system ruoyi-resource
```

