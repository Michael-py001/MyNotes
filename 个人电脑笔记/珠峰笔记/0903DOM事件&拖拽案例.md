#### 目录

[TOC]

#### A标签锚点定位

> A标签的默认行为:
>
> ​      \+ 页面跳转
>
> ​      \+ 锚点定位（定位到当前页面指定ID的盒子位置，URL地址中会加入HASH值）

```html
<a href="#box" id="link">哈哈</a>
    <div class="box" id="box"></div>
```

#### 阻止事件的默认行为

```html
<a href="http://www.baidu.com/" id="link">哈哈</a>
<script>
  // 点击A标签，先触发其点击事件行为，然后才是默认的跳转
  link.onclick = function (ev) {
  // 阻止默认行为
  ev.preventDefault();

  // return false;
};
</script>
```



#### 鼠标事件

+ click 点击事件(PC:频繁点击N次，触发N次点击事件) 单击事件(移动端:300ms内没有发生第二次点击操作，算作单击事件行为，所以click在移动端有300ms延迟)
| `auxclick`          | A pointing device button (ANY non-primary button) has been pressed and released on an element. |
| ------------------- | ------------------------------------------------------------ |
| `click`             | 在元素上按下并释放任意鼠标按键。                             |
| `contextmenu`       | 右键点击（在右键菜单显示前触发）。                           |
| `dblclick`          | 在元素上双击鼠标按钮。                                       |
| `mousedown`         | 在元素上按下任意鼠标按钮。                                   |
| `mouseenter`        | 指针移到有事件监听的元素内。                                 |
| `mouseleave`        | 指针移出元素范围外（不冒泡）。                               |
| `mousemove`         | 指针在元素内移动时持续触发。                                 |
| `mouseover`         | 指针移到有事件监听的元素或者它的子元素内。                   |
| `mouseout`          | 指针移出元素，或者移到它的子元素上。                         |
| `mouseup`           | 在元素上释放任意鼠标按键。                                   |
| `pointerlockchange` | 鼠标被锁定或者解除锁定发生时。                               |
| `pointerlockerror`  | 可能因为一些技术的原因鼠标锁定被禁止时。                     |
| `select`            | 有文本被选中。                                               |
| `wheel`             | 滚轮向任意方向滚动。                                         |

```js
myPics.addEventListener('mousedown', e => {
  x = e.offsetX;
  y = e.offsetY;
});
```

+ **鼠标事件对象 MouseEvent** 
  + `clientX/clientY` 鼠标触发点距离当前窗口的X/Y轴坐标
  + `pageX/pageY `鼠标触发点距离BODY的X/Y轴坐标
    + `clientX/clientY`鼠标点击相对于浏览器窗口的坐标
      `pageX/pageY`是鼠标点击位置相对于整个页面的坐标
      如果页面没有卷曲，则`clientX/clientY`相等于`pageX/pageY`
    + ![image-20200904000852961](https://i.loli.net/2020/09/04/Ymoh8ikBQFgNyIC.png)
  +  type 事件类型
  +  target / srcElement 获取当前事件源(当前操作的元素)
  +  path 传播路径
  + ev.preventDefault() / ev.returnValue=false 阻止默认行为
  + ev.stopPropagation() / ev.cancelBubble=true 阻止冒泡传播

#### 键盘事件

| `keydown`  | 按下任意按键。                                          |
| ---------- | ------------------------------------------------------- |
| `keypress` | 除 Shift、Fn、CapsLock 外的任意键被按住。（连续触发。） |
| `keyup`    | 释放任意按键。                                          |

```js
<p id="log"></p>
document.addEventListener('keydown', logKey);

function logKey(e) {
  log.textContent += ` ${e.code}`;
}
```

+ **键盘事件对象 KeyboardEvent**
  + key / code 存储按键名字
  + which / keyCode 获取按键的键盘码
    + 方向键 “左37 上38 右39 下40”
    + Space 32
    + BackSpace 8
    + Del 46  MAC电脑中没有BackSpace，delete键是 8
    + Enter 13
    + Shift 16   
    + Ctrl 17   
    + Alt 18
    + ...
  + altKey 是否按下alt键(组合按键)
  + ctrlKey 是否按下ctrl键(组合按键)
  + shiftKey 是否按下shift键(组合按键)

  

#### 手指事件（移动端）

「Touch Event 单手指事件模型」

+ touchstart 手指按下
+ touchmove 手指移动
+ touchend 手指松开
 「Gesture Event 多手指事件模型」

#### 表单事件

+ focus 获取焦点
+ blur 失去焦点
+ submit 表单提交（前提：表单元素都包含在form中，并且点击的按钮是submit）
+ reset 表单重置（前提：表单元素都包含在form中，并且点击的按钮是reset）
+ select 下拉框内容选中
+ change 内容改变
+ input 移动端中经常使用的，监控文本框中的内容随着输入的改变而触发
+ ...

#### 资源事件 

+ load 加载成功（window.onload / img.onload）
+ error 加载失败
+ beforeunload 资源卸载之前（window.onbeforeunload 页面关闭之前触发）
+ ...

#### CSS3动画事件

+ transitionend  transition动画结束
+ transitionstart transition动画开始
+ transitionrun  transition动画运行中
+ ...

#### 视图事件

+ resize 元素(浏览器)大小改变
+ scroll 滚动条滚动
+ ...

#### 拖放事件

| `drag`      | 正在拖动元素或文本选区（在此过程中持续触发，每 350ms 触发一次） |
| ----------- | ------------------------------------------------------------ |
| `dragend`   | 拖放操作结束。（松开鼠标按钮或按下 Esc 键）                  |
| `dragenter` | 被拖动的元素或文本选区移入有效释放目标区                     |
| `dragstart` | 用户开始拖动HTML元素或选中的文本                             |
| `dragleave` | 被拖动的元素或文本选区移出有效释放目标区                     |
| `dragover`  | 被拖动的元素或文本选区正在有效释放目标上被拖动 （在此过程中持续触发，每350ms触发一次） |
| `drop`      | 元素在有效释放目标区上释放                                   |

直接写在标签上的属性：**ondragstart**

**语法**

HTML 中：

`<*element* ondragstart="myScript">`[尝试一下](https://www.runoob.com/try/try.php?filename=tryjsref_ondragstart_html)

JavaScript 中：

`object.ondragstart=function(){*myScript*}`;[尝试一下](https://www.runoob.com/try/try.php?filename=tryjsref_ondragstart_dom)

JavaScript 中, 使用 addEventListener() 方法:

`object.addEventListener("dragstart", *myScript*);`

##### ondragstart定义和用法

ondragstart 事件在用户开始拖动元素或选择的文本时触发。

拖放是 HTML5 中非常常见的功能。 更多信息可以查看我们 HTML 教程中的 [HTML5 拖放](https://www.runoob.com/html/html5-draganddrop.html)。

**注意：** 为了让元素可拖动，需要使用 HTML5 [draggable](https://www.runoob.com/tags/att-global-draggable.html) 属性。

**提示：** 链接和图片默认是可拖动的，不需要 draggable 属性。

在拖放的过程中会触发以下事件：

- 在拖动目标上触发事件(源元素):
  - ondragstart - 用户开始拖动元素时触发
  - [ondrag](https://www.runoob.com/jsref/event-ondrag.html) - 元素正在拖动时触发
  - [ondragend](https://www.runoob.com/jsref/event-ondragend.html) - 用户完成元素拖动后触发
- 释放目标时触发的事件:
  - [ondragenter](https://www.runoob.com/jsref/event-ondragenter.html) - 当被鼠标拖动的对象进入其容器范围内时触发此事件
  - [ondragover](https://www.runoob.com/jsref/event-ondragover.html) - 当某被拖动的对象在另一对象容器范围内拖动时触发此事件
  - [ondragleave](https://www.runoob.com/jsref/event-ondragleave.html) - 当被鼠标拖动的对象离开其容器范围内时触发此事件
  - [ondrop](https://www.runoob.com/jsref/event-ondrop.html) - 在一个拖动过程中，释放鼠标键时触发此事件

#####  draggable 属性

定义和用法：

draggable 属性规定元素是否可拖动。

**提示：** 链接和图像默认是可拖动的。

**语法**：`<*element* draggable="true|false|auto">`

##### 案例一：

![image-20200903234412235](https://i.loli.net/2020/09/03/sYorehT9B17OKnt.png)

```js
<div class="dropzone">
  <div id="draggable" draggable="true" ondragstart="event.dataTransfer.setData('text/plain',null)">
    This div is draggable
  </div>
</div>
<div class="dropzone"></div>
<div class="dropzone"></div>
<div class="dropzone"></div>

<style>
  #draggable {
    width: 200px;
    height: 20px;
    text-align: center;
    background: white;
  }

  .dropzone {
    width: 200px;
    height: 20px;
    background: blueviolet;
    margin-bottom: 10px;
    padding: 10px;
  }
</style>

<script>
  var dragged;

  /* 拖动目标元素时触发drag事件 */
  document.addEventListener("drag", function( event ) {

  }, false);

  document.addEventListener("dragstart", function( event ) {
      // 保存拖动元素的引用(ref.)
      dragged = event.target;
      // 使其半透明
      event.target.style.opacity = .5;
  }, false);

  document.addEventListener("dragend", function( event ) {
      // 重置透明度
      event.target.style.opacity = "";
  }, false);

  /* 放置目标元素时触发事件 */
  document.addEventListener("dragover", function( event ) {
      // 阻止默认动作以启用drop
      event.preventDefault();
  }, false);

  document.addEventListener("dragenter", function( event ) {
      // 当可拖动的元素进入可放置的目标时高亮目标节点
      if ( event.target.className == "dropzone" ) {
          event.target.style.background = "purple";
      }

  }, false);

  document.addEventListener("dragleave", function( event ) {
      // 当拖动元素离开可放置目标节点，重置其背景
      if ( event.target.className == "dropzone" ) {
          event.target.style.background = "";
      }

  }, false);

  document.addEventListener("drop", function( event ) {
      // 阻止默认动作（如打开一些元素的链接）
      event.preventDefault();
      // 将拖动的元素到所选择的放置目标节点中
      if ( event.target.className == "dropzone" ) {
          event.target.style.background = "";
          dragged.parentNode.removeChild( dragged );
          event.target.appendChild( dragged );
      }
    
  }, false);
</script>
```

##### 案例二：

![image-20200903234547548](https://i.loli.net/2020/09/03/HlyZh8fL7Y9aMpw.png)

```js
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>菜鸟教程(runoob.com)</title>
<style>
.droptarget {
    float: left; 
    width: 100px; 
    height: 35px;
    margin: 15px;
    padding: 10px;
    border: 1px solid #aaaaaa;
}
</style>
</head>
<body>

<p>在两个矩形框中来回拖动 p 元素:</p>
<div class="droptarget">
	<p draggable="true" id="dragtarget">拖动我!</p>
</div>
<div class="droptarget"></div>
<p style="clear:both;"><strong>注意：</strong>Internet Explorer 8 及更早 IE 版本或 Safari 5.1 及更早版本的浏览器不支持 drag 事件。</p>
<p id="demo"></p>
<script>
/* 拖动时触发*/
document.addEventListener("dragstart", function(event) {
    //dataTransfer.setData()方法设置数据类型和拖动的数据
    event.dataTransfer.setData("Text", event.target.id);
    // 拖动 p 元素时输出一些文本
    document.getElementById("demo").innerHTML = "开始拖动 p 元素.";    
    //修改拖动元素的透明度
    event.target.style.opacity = "0.4";
});
//在拖动p元素的同时,改变输出文本的颜色
document.addEventListener("drag", function(event) {
    document.getElementById("demo").style.color = "red";
});
// 当拖完p元素输出一些文本元素和重置透明度
document.addEventListener("dragend", function(event) {
    document.getElementById("demo").innerHTML = "完成 p 元素的拖动";
    event.target.style.opacity = "1";
});
/* 拖动完成后触发 */
// 当p元素完成拖动进入droptarget,改变div的边框样式
document.addEventListener("dragenter", function(event) {
    if ( event.target.className == "droptarget" ) {
        event.target.style.border = "3px dotted red";
    }
});
// 默认情况下,数据/元素不能在其他元素中被拖放。对于drop我们必须防止元素的默认处理
document.addEventListener("dragover", function(event) {
    event.preventDefault();
});
// 当可拖放的p元素离开droptarget，重置div的边框样式
document.addEventListener("dragleave", function(event) {
    if ( event.target.className == "droptarget" ) {
        event.target.style.border = "";
    }
});
/*对于drop,防止浏览器的默认处理数据(在drop中链接是默认打开)
复位输出文本的颜色和DIV的边框颜色
利用dataTransfer.getData()方法获得拖放数据
拖拖的数据元素id(“drag1”)
拖拽元素附加到drop元素*/
document.addEventListener("drop", function(event) {
    event.preventDefault();
    if ( event.target.className == "droptarget" ) {
        document.getElementById("demo").style.color = "";
        event.target.style.border = "";
        var data = event.dataTransfer.getData("Text");
        event.target.appendChild(document.getElementById(data));
    }
});
</script>

</body>
</html>
```

