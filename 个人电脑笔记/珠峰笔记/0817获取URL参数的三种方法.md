#### 一：使用字符串方法解析

> A||B:A如果是假返回B的值，A如果是真返回A的值（只有五个值是假，其余都是真）
> A&&B:A如果是假返回A的值，A如果是真返回B的值

```js
function queryURLParams(url, key) {
    // 获取?和#的索引及内容
    var askIndex = url.indexOf('?'),
        weiIndex = url.indexOf('#'),
        askText = '',
        weiText = '',
        obj = {};

    // #不存在，我们让其等于末尾的索引（最大索引还要+1）
    weiIndex === -1 ? weiIndex = url.length : null;
    if (weiIndex !== url.length) {
        // 存在#则获取哈希值
        weiText = url.substring(weiIndex + 1);
        obj['_hash'] = weiText;
    }

    // ?不存在就不处理了
    if (askIndex > -1) {
        // 存在?则处理问号传参信息
        askText = url.substring(askIndex + 1, weiIndex);
        askText.split('&').forEach(function (item) {
            item = item.split('=');
            obj[item[0]] = item[1];
        });
    }

    // A||B:如果A是假返回B的值，A如果是真返回A的值（只有五个值是假，其余都是真）
    // A&&B:A如果是假返回A的值，A如果是真返回B的值
    return typeof key !== "undefined" ?
        obj[key] || '' :
        obj;
}
```

#### 二：使用a标签与`URLSearchParams()`结合

```js
// 进阶2:简化获取内容的逻辑
function queryURLParams(url, key) {
    var askText = '',
        weiText = '',
        obj = {};

    // 简化获取?和#后面值的操作：利用A元素对象，会把一个URL的各部分解析出来（没有某部分信息，结果是空字符串，如果有这部分信息，则就可以获取这部分内容，对于search/hash是带着?和#的）
    var linkTemp = document.createElement('a');
    linkTemp.href = url;
    askText = linkTemp.search;
    weiText = linkTemp.hash;

    // 存在#则获取哈希值
    weiText ? obj['_hash'] = weiText.substring(1) : null;

    // 存在?则处理问号传参信息
    if (askText) {
        askText = askText.substring(1);
        // 简化逻辑：基于URLSearchParams简化(这个类就是获取一个问号参数的信息的)
        var usp = new URLSearchParams(askText);
        usp = [...usp.entries()];
        usp.forEach(function (item) {
            obj[item[0]] = item[0];
        });
    }

    return typeof key !== "undefined" ?
        obj[key] || '' :
        obj;
}
```

#### 三：使用正则

```js
// 终极进阶：使用正则几行代码就搞定
function queryURLParams(url, key) {
    var obj = {};
    url.replace(/#([^?=&#]+)/g, function (_, hash) {
        obj['_hash'] = hash;
    });
    url.replace(/([^?=&#]+)=([^?=&#]+)/g, function (_, key, value) {
        obj[key] = value;
    });
    return typeof key !== "undefined" ?
        obj[key] || '' :
        obj;
}

var url = "http://www.zhufengpeixun.cn/index.html?lx=0&from=weixin#video";
var res1 = queryURLParams(url);
```

#### 四：使用 `new URL(url)`

```js
/*
 * 获取url中search中的参数对应的值
 * @param  {string} key
 * @param  {string } url 默认为当前页面Url
 * @returns {string} key对应的value
 */
const getMyQueryString = (key, url = window.location.href) => {

    const urlObj = new URL(url)
    console.log(urlObj);

    const searchParams = urlObj.searchParams
    console.log(searchParams);
    console.log(searchParams.get(key));

    return searchParams.get(key)

}
var url = "http://www.zhufengpeixun.cn/index.html?lx=0&from=weixin#video";
getMyQueryString("from", url)
```

