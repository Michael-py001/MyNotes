[TOC]



# 一个项目的目录结构

![image-20210327015030092](https://i.loli.net/2021/03/27/2L6HG5zjoScuDhd.png)

## public

该文件夹放公共文件，比如可以有 `css` `js` `html` `images`等文件夹，还有一个`index.html`入口文件

，打包后不同的文件夹会在`dist`的根目录下。

![image-20210327015617166](https://i.loli.net/2021/03/27/QtWbjocT1SvUaLB.png)![image-20210327015631244](https://i.loli.net/2021/03/27/lha3N1kZsyABTOE.png)

## src

该文件夹一般会有：

- `assets`:存放css images等不同组件页面使用到的文件
- `components`：各个组件，比如head tabbar等公用组件
- `views`: 各个视图，比如首页，子页面等
- `store` ：存放vuex redux的资源
- `App.vue` 视图主入口
- `main.js` JS主入口

## vue.config.js

里面可以配置webpack类似的打包配置。

> https://cli.vuejs.org/zh/guide/webpack.html#%E7%AE%80%E5%8D%95%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F

```js
// commentJS规范
const TerserPlugin = require('terser-webpack-plugin')
module.exports = {
    runtimeCompiler: true,
    // assetsDir: "./"
    publicPath: './',
    // module.exports 中配置，可加参数，详见github文档或百度
    configureWebpack: config => {
        if (process.env.NODE_ENV === 'production') {
            config.plugins.push(new TerserPlugin({
                terserOptions: {
                    ecma: undefined,
                    warnings: false,
                    parse: {},
                    compress: {
                        drop_console: true,
                        drop_debugger: false,
                        pure_funcs: ['console.log'], // 移除console
                    },
                },
            }))
        }
    }
}
```

## TerserPlugin 兼容ES6

> 可以去除代码中的console debugger 等，并且压缩代码，兼容ES6代码
>
> https://webpack.docschina.org/plugins/terser-webpack-plugin

Format option参数：https://github.com/terser/terser#format-options

compress-options：https://github.com/terser/terser#compress-options

删除注释：https://webpack.docschina.org/plugins/terser-webpack-plugin/#remove-comments



### 各种优化案例

https://blog.csdn.net/weixin_43123014/article/details/109455212

## runtimeCompiler

> 允许vue运行时编译

## publicPath

> 打包的路径
>
> https://cli.vuejs.org/zh/config/#publicpath

## 修改webpack的配置

### [#](https://cli.vuejs.org/zh/guide/webpack.html#简单的配置方式)简单的配置方式

调整 webpack 配置最简单的方式就是在 `vue.config.js` 中的 `configureWebpack` 选项提供一个对象：

```js
// vue.config.js
module.exports = {
  configureWebpack: {
    plugins: [
      new MyAwesomeWebpackPlugin()
    ]
  }
}
```

如果你需要基于环境有条件地配置行为，或者想要直接修改配置，那就换成一个函数 (该函数会在环境变量被设置之后懒执行)。该方法的第一个参数会收到已经解析好的配置。在函数内，你可以直接修改配置，或者返回一个将会被合并的对象：

```js
// vue.config.js
module.exports = {
  configureWebpack: config => {
    if (process.env.NODE_ENV === 'production') {
      // 为生产环境修改配置...
    } else {
      // 为开发环境修改配置...
    }
  }
}
```

