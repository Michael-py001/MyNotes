### 冒泡传播机制

![image-20200903171529048](https://i.loli.net/2020/09/03/XPgzAa346NOBFl8.png)

#### 阶段1：捕获阶段

从最外层元素向里逐层查找，直到找到事件源为止，目的是为了冒泡阶段提供传播路径。

ev.path存放的就是捕获阶段收集的传播路径

#### 阶段2：目标阶段

把当前事件源的相关事件行为触发

#### 阶段3：冒泡阶段

按照捕获阶段收集的传播路径，首先当前事件源的事件触发，然后从里到外路径所经过的祖先元素的相关事件也会被触发（如果做了事件绑定，绑定的方法也会执行）



### 事件委托/事件代理

> 简单的说，根据冒泡原理中的捕获阶段，点击ul时会派送到子节点li，让儿子的事件让父亲执行，性能高 60%左右

```js
ul.onmouseover = function (e) {
    console.log(e.target)
    for (var i = 0; i < list_arr.length; i++) {
        // 匹配鼠标移动到的li
        if (e.target == list_arr[i]) {
            // 执行方法
            changeTab(e.target)
        }
    }
```

- DOM0事件绑定中给元素事件行为绑定的方法，都是在目标阶段/冒泡阶段触发的 

- DOM2事件绑定可以控制在绑定的方法在捕获阶段触发(虽然没有什么实际的意义)

  - 元素.addEventListener(事件,方法,false/true)

  - 最后一个参数默认是false：控制方法是在冒泡阶段触发执行的，如设置为true可以控制在捕获阶段触发执行

    ```js
     box.addEventListener('click', function (ev) {
       	console.log('BOX==>', ev);
     }, true);
    ```

### 阻止冒泡

#### event.stopPropagation()

> 停止事件的传播，阻止它在冒泡阶段分派给其他节点。

```js
inner.onclick = function (ev) {
    console.log('INNER==>', ev);
    ev.stopPropagation();
};
```

#### event.preventDefault()

> 取消事件的默认动作。比如取消打开链接，选择文本或拖放等。

#### pointer-events: none

> 1 阻止用户的点击动作产生任何效果
>
> 2 阻止缺省鼠标指针的显示
>
> 3 阻止CSS里的hover和active状态的变化触发事件
>
> 4 阻止JavaScript点击动作触发的事件

### 鼠标事件

#### onmouseover 鼠标滑过

#### onmouseout 鼠标滑出

> onmouseover / onmouseout都存在事件的冒泡传播机制，会忽略元素层级关系，一切按照鼠标在谁上面来决定over/out

#### onmouseenter 鼠标进入

#### onmouseleave 鼠标离开

> onmouseenter / onmouseleave 默认阻止了事件的冒泡传播机制，受到元素层级关系的影响。