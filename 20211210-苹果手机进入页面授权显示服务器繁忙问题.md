# 20211210-苹果手机进入页面授权显示服务器繁忙问题

比如跳转到一个页面，携带参数，`http://m.jizhikongqi.fenaor.com/#/pages/Order/page/Order/Order?device_sn=8111851522`，

在App,vue的created阶段会先请求获取微信授权，

如果此时没有微信授权code，没有登录token，则会跳转到微信授权页面，

且页面内的请求设备信息也会发起，但此时又没有登录token，则会跳到登录页，

以上两个操作相当于同时进行，互相会有影响跳转，在苹果手机会出现服务器繁忙的文字

## 解决方案

1. 所有跳转统一先到一个登陆中心进行授权，授权后再根据回调参数进行跳转，这样就不会有冲突
2. 如果是直接携带参数进入某个页面，在onLoad阶段先判断有没有token，没有的话就不请求，先让APP.vue的请求授权先进行，然后根据回调进去这个页面就会有token正常请求了