# Git 提交规范

在团队协作开发中，统一、清晰的 Git 提交信息能大幅提升协作效率、代码审查体验以及变更日志生成质量。 下文结合常见的提交类型，给出一套可直接落地的 Git 提交规范示例，并配有命令示例，方便你在项目中使用。

## 基本格式约定

推荐使用统一格式：

```bash
git commit -m "<type>: <简要描述>"
```

约定：

- **type**：提交类型（如 feat、fix 等）。
- 描述使用动词开头的简短句子，说明“做了什么”。
- 默认使用小写英文字母的 type，冒号后加空格再写描述。

示例：

```bash
bashgit commit -m "feat: 增加用户注册功能"
git commit -m "fix: 修复登录接口在特殊情况下返回错误的问题"
```

------

## 功能与问题类提交类型

## feat：新增功能

用于新增业务功能或模块。

示例：

```bash
# 完成用户注册接口与前端表单
git commit -m "feat: 增加用户注册功能"

# 新增导出报表的功能
git commit -m "feat: 支持导出订单报表为Excel"
```

## fix：修复 Bug

用于修复缺陷或问题，包括线上 Bug 和测试发现的问题。

示例：

```bash
# 修复特殊条件下登录失败的问题
git commit -m "fix: 修复登录接口在特殊情况下返回错误的问题"

# 修复分页组件页码显示错误
git commit -m "fix: 纠正订单列表分页逻辑导致的页码异常"
```

------

## 代码质量与性能相关

## style：代码风格调整

只涉及格式、代码风格，不改变任何运行逻辑。

示例：

```bash
# 统一格式、空格、缩进等
git commit -m "style: 优化代码格式并遵循 PEP8 规范"

# 调整 import 顺序、删除无用空行
git commit -m "style: 调整导入顺序并清理多余空行"
```

## perf：性能优化

用于提升性能或资源利用率，如优化算法、减少数据库查询等。

示例：

```bash
# 优化查询语句
git commit -m "perf: 优化查询逻辑，提升数据检索速度 30%"

# 添加缓存减少重复请求
git commit -m "perf: 引入缓存减少首页接口响应时间"
```

## refactor：代码重构

不改变对外行为，只改善内部结构、可读性、模块划分等。

示例：

```bash
# 重构用户模块
git commit -m "refactor: 重构用户管理模块，提升代码可读性"

# 提取公共方法
git commit -m "refactor: 抽离重复的校验逻辑到公共工具函数"
```

------

## 回滚、测试与文档

## revert：撤销修改

用于回滚之前的一次或多次提交，通常配合 Git 自带的 `revert` 命令使用。

示例：

```bash
# 回滚上一次关于支付逻辑的提交
git revert <commit-hash>
git commit -m "revert: 撤销上一次关于支付逻辑的改动"
```

## test：测试相关

新增、修改或删除任何测试代码（单测、集成测试、端到端测试等）。

示例：

```bash
# 为新功能添加单元测试
git commit -m "test: 添加用户注册功能的单元测试用例"

# 修复不稳定的测试
git commit -m "test: 修复订单模块间歇性失败的集成测试"
```

## docs：文档与注释

涉及文档、说明文件、注释等非业务逻辑代码的变更。

示例：

```bash
# 更新项目使用说明
git commit -m "docs: 更新 README 文档，补充项目安装步骤"

# 增加关键逻辑注释
git commit -m "docs: 为支付流程核心逻辑增加详细注释"
```

------

## 工具链、配置与工作流

## chore：依赖与脚手架等杂项

对构建工具、依赖版本、脚本等进行修改，不直接影响业务逻辑。

示例：

```bash
# 升级前端依赖
git commit -m "chore: 升级 React 到最新版本并更新 package.json"

# 调整构建脚本
git commit -m "chore: 优化打包脚本以减少构建时间"
```

## workflow：工作流改进

与团队工作流、发布流程、自动化运维等相关的改动。

示例：

```bash
# 改进 CI/CD 流程
git commit -m "workflow: 调整 CI/CD 流程以支持自动化部署"

# 添加代码审查模板
git commit -m "workflow: 新增 PR 模板统一代码审查标准"
```

## ci：持续集成配置

针对 CI 系统配置（如 GitHub Actions、Travis CI、Jenkins 等）的变动。

示例：

```bash
# 新增 CI 配置文件
git commit -m "ci: 配置 Travis CI，实现自动化单元测试"

# 修改 GitHub Actions 工作流
git commit -m "ci: 调整 GitHub Actions 触发条件与缓存策略"
```

------

## 类型定义与开发中工作

## types：类型定义文件变更

适用于 TypeScript 等有类型声明文件的项目。

示例：

```bash
# 更新 user 类型定义
git commit -m "types: 更新 user 类型定义，新增 address 字段"

# 拆分类型文件
git commit -m "types: 拆分公共类型定义到 shared-types.d.ts"
```

## wip：开发中（Work in Progress）

功能尚未完成但需要中间提交时使用，建议只在分支上使用，不直接出现在主干分支历史中。

示例：

```bash
# 正在开发订单管理模块
git commit -m "wip: 开始开发订单管理模块，基础结构已搭建"

# 中途保存当前工作
git commit -m "wip: 初步完成支付页面 UI 布局"
```

------

## 实战示例：从修改到提交

以下是一个从开发到提交的小示例，展示如何组合使用这些类型：

```bash
# 1. 新增用户注册接口
# 修改完成后提交
git add .
git commit -m "feat: 增加用户注册接口与基础校验"

# 2. 为上面的功能补充单元测试
git add tests/user_register.test.ts
git commit -m "test: 为用户注册接口补充分支场景用例"

# 3. 调整代码格式，统一 ESLint 规范
git add .
git commit -m "style: 统一用户模块代码风格以通过 ESLint 检查"

# 4. 优化查询性能
git add .
git commit -m "perf: 优化用户查询 SQL 减少不必要的联表操作"

# 5. 更新 README，说明新接口
git add README.md
git commit -m "docs: 更新接口文档以说明用户注册参数和返回格式"
```

通过为不同类型的改动选择合适的提交类型，项目历史会更加清晰，代码审查者也能一眼看出每次提交的意图，从而让协作和维护变得更加有序、高效。

## “看起来不那么重要”的改动

如果是“看起来不那么重要”的改动，可以按改动的实际内容来选类型，而不是按“重要程度”来选：

- 只是改格式、空格、换行、命名等，不影响逻辑：用 **style**。
- 改文档、注释、README：用 **docs**。
- 调整依赖、构建脚本、配置文件（不直接改业务逻辑）：用 **chore**。

如果实在是杂项小改动，又不好归类到以上某一种，可以默认用 **chore**，表示项目维护类的琐碎改动。

## UI 和 CSS 的调整

UI 和 CSS 的调整，一般有两种常见做法（看团队约定）：

- 把 UI/CSS 视为“界面功能或体验”的一部分：用 **feat**（新增界面能力）或 **fix**（修复样式问题）。
  - 例：`fix: 修复移动端首页按钮错位问题`
- 单独归到样式类改动：很多团队直接用 **style** 来表示纯样式、视觉层面的修改。

如果你们没有特别细分，推荐：

- 纯视觉/布局调整、不影响逻辑：用 **style**。
- 明确修 Bug（错位、遮挡、响应式异常）：用 **fix**。